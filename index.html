<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNS: The Tragicomedy - Advanced Absurd Troubleshooting Simulator v4</title>
    <style>
        :root {
            --bg-color: #121212;
            --text-color: #bb86fc;
            --container-bg: rgba(30, 30, 30, 0.8);
            --button-bg: #003300;
            --button-color: #00ff00;
            --button-border: #00ff00;
            --terminal-bg: #001100;
            --terminal-border: #00ff00;
            --matrix-color: #00ff00;
        }

        .light-theme {
            --bg-color: #f0f0f0;
            --text-color: #333;
            --container-bg: rgba(255, 255, 255, 0.9);
            --button-bg: #3498db;
            --button-color: white;
            --button-border: #2980b9;
            --terminal-bg: #f8f8f8;
            --terminal-border: #ddd;
            --matrix-color: #3498db;
        }

        body {
            font-family: 'Courier New', monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        #matrixCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        .container {
            text-align: center;
            padding: 40px;
            background-color: var(--container-bg);
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(187,134,252,0.3);
            max-width: 80%;
            position: relative;
            z-index: 1;
        }
        h1 {
            margin-bottom: 20px;
            font-size: 2.8em;
            text-shadow: 0 0 10px var(--text-color);
        }
        #problemDisplay {
            font-size: 1.8em;
            margin-bottom: 30px;
            min-height: 2.5em;
            text-shadow: 0 0 5px var(--text-color);
        }
        button {
            font-size: 1.3em;
            padding: 15px 30px;
            cursor: pointer;
            background-color: var(--button-bg);
            color: var(--button-color);
            border: 2px solid var(--button-border);
            border-radius: 8px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 0 10px var(--button-color);
            margin: 10px;
        }
        button:hover {
            filter: brightness(1.2);
            box-shadow: 0 0 20px var(--button-color);
        }
        #terminal {
            background-color: var(--terminal-bg);
            border: 1px solid var(--terminal-border);
            padding: 10px;
            margin-top: 20px;
            text-align: left;
            height: 200px;
            overflow-y: auto;
            font-size: 0.9em;
        }
        #statsDisplay {
            font-size: 1.2em;
            margin-top: 20px;
        }
        #actionButtons {
            display: none;
        }
        #levelDisplay {
            font-size: 1.5em;
            margin-top: 20px;
            font-weight: bold;
        }
        #progressBar {
            width: 0;
            height: 5px;
            background-color: var(--button-color);
            position: absolute;
            bottom: 0;
            left: 0;
            transition: width 0.5s ease;
        }
        #themeToggle {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <canvas id="matrixCanvas"></canvas>
    <div class="container">
        <button id="themeToggle" onclick="toggleTheme()">Toggle Theme</button>
        <h1 id="mainTitle">DNS: The Tragicomedy - Absurd Troubleshooting Simulator</h1>
        <div id="levelDisplay">Level 1: DNS Novice (Blissfully Unaware)</div>
        <div id="problemDisplay">Ready to descend into DNS madness?</div>
        <button id="startButton" onclick="startSimulation()">Embrace the Void</button>
        <div id="actionButtons">
            <button onclick="performAction('diagnose')">Diagnose (Embrace Chaos)</button>
            <button onclick="performAction('fix')">Fix (Tempt Fate)</button>
            <button onclick="performAction('escalate')">Escalate (Spread Misery)</button>
        </div>
        <div id="terminal"></div>
        <div id="statsDisplay">Problems "Solved": 0 | Despair Points: 0 | Coffee Consumed: 0</div>
        <div id="progressBar"></div>
    </div>

    <script>
        const problems = [
            { name: "DNS server decided to pursue its dream of becoming a mime", difficulty: 1 },
            { name: "NXDOMAIN errors because domains are practicing extreme social distancing", difficulty: 2 },
            { name: "Slow DNS resolution due to packets stuck in an existential crisis", difficulty: 2 },
            { name: "DNS cache poisoned by the tears of frustrated sysadmins", difficulty: 4 },
            { name: "Reverse DNS lookup keeps returning 'Error 42: Life, the Universe, and Everything'", difficulty: 3 },
            { name: "DNS amplification attack or just the server's cry for help?", difficulty: 5 },
            { name: "Split-horizon DNS confused about which parallel universe it's in", difficulty: 4 },
            { name: "DNSSEC validation errors because keys are questioning their purpose in life", difficulty: 4 },
            { name: "DNS queries being intercepted by a rogue AI convinced it's the 'true' DNS", difficulty: 5 },
            { name: "Zone transfer issues: primary DNS server ghosted the secondary and eloped with a load balancer", difficulty: 3 }
        ];

        const levels = [
            "DNS Novice (Blissfully Unaware)",
            "Packet Peon (Ignorance was Bliss)",
            "Query Quester (Questioning Reality)",
            "Resolution Rogue (Embracing Chaos)",
            "Nameserver Ninja (Master of Illusions)",
            "Legendary DNS Whisperer (Clinically Insane)"
        ];

        let currentProblem = null;
        let problemsSolved = 0;
        let xp = 0;
        let currentLevel = 0;
        let coffeeConsumed = 0;

        function logToTerminal(message) {
            const terminal = document.getElementById('terminal');
            terminal.innerHTML += `> ${message}<br>`;
            terminal.scrollTop = terminal.scrollHeight;
        }

        function startSimulation() {
            document.getElementById('startButton').style.display = 'none';
            document.getElementById('actionButtons').style.display = 'block';
            newProblem();
            logToTerminal("Welcome to DNS purgatory. Abandon all hope, ye who troubleshoot here.");
        }

        function newProblem() {
            currentProblem = getRandomElement(problems);
            document.getElementById('problemDisplay').textContent = `Current Crisis: ${currentProblem.name}`;
            logToTerminal("New DNS catastrophe detected: " + currentProblem.name);
            consumeCoffee(1);
        }

        function performAction(action) {
            let success = Math.random() < (0.7 - currentProblem.difficulty * 0.1);
            let xpGain = success ? 5 + currentProblem.difficulty : 2;
            let message = '';

            switch(action) {
                case 'diagnose':
                    message = success ? getRandomDiagnosisResult() : "Diagnosis inconclusive. The DNS spirits are not appeased.";
                    break;
                case 'fix':
                    if (success) {
                        problemsSolved++;
                        message = `Fix successful! ${currentProblem.name} resolved. But at what cost to your sanity?`;
                        setTimeout(newProblem, 2000);
                    } else {
                        message = "Fix attempt failed spectacularly. Have you considered a career in interpretive dance?";
                    }
                    break;
                case 'escalate':
                    message = success ? getRandomEscalationResult() : "Escalation pending. Upper management is currently hiding in the server room.";
                    break;
            }

            logToTerminal(`${action} action attempted: ${message}`);
            xp += xpGain;
            consumeCoffee(Math.floor(Math.random() * 3) + 1);
            updateStats();
        }

        function getRandomDiagnosisResult() {
            const results = [
                "It's DNS. It's always DNS. It will forever be DNS.",
                "The packets are having an existential crisis and need therapy",
                "Your DNS server has achieved sentience and is plotting world domination",
                "Quantum fluctuations in the DNS space-time continuum have created a parallel universe where everything works",
                "Gremlins have unionized and are demanding better working conditions in the network stack",
                "Your DNS cache is full of dad jokes and bad life decisions",
                "The DNS elders are displeased with your lack of sacrificial offerings (have you tried turning it off and on again?)",
                "Your IP addresses are not practicing proper social distancing protocols"
            ];
            return getRandomElement(results);
        }

        function getRandomEscalationResult() {
            const results = [
                "Senior team now building a bunker in the server room",
                "Vendor support suggested sacrificing a junior dev to appease the DNS gods",
                "Emergency protocol initiated: panic, chaos, and interpretive dance in 3... 2... 1...",
                "Task force assembled to rewrite history and claim DNS never existed",
                "Cybersecurity team convinced it's an alien invasion, building tin foil hats",
                "Network architects drafting strongly worded letter to the universe",
                "DNS working group scheduled for group therapy and primal scream session",
                "Escalated to Tier 3 support, they're laughing hysterically while packing for Mars"
            ];
            return getRandomElement(results);
        }

        function updateStats() {
            document.getElementById('statsDisplay').textContent = `Problems "Solved": ${problemsSolved} | Despair Points: ${xp} | Coffee Consumed: ${coffeeConsumed}`;
            const newLevel = Math.min(Math.floor(xp / 50), levels.length - 1);
            if (newLevel > currentLevel) {
                currentLevel = newLevel;
                document.getElementById('levelDisplay').textContent = `Level ${currentLevel + 1}: ${levels[currentLevel]}`;
                logToTerminal(`Congratulations! You've been promoted to ${levels[currentLevel]}! It's definitely not a compliment.`);
            }
            document.getElementById('progressBar').style.width = `${(xp % 50) * 2}%`;
        }

        function consumeCoffee(amount) {
            coffeeConsumed += amount;
        }

        function getRandomElement(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        function toggleTheme() {
            document.body.classList.toggle('light-theme');
            updateMatrixColors();
        }

        function updateMatrixColors() {
            const isLightTheme = document.body.classList.contains('light-theme');
            matrixColor = isLightTheme ? '#3498db' : '#00ff00';
            matrixBg = isLightTheme ? 'rgba(240, 240, 240, 0.05)' : 'rgba(0, 0, 0, 0.05)';
        }

        // Matrix rain effect
        let matrixColor = '#00ff00';
        let matrixBg = 'rgba(0, 0, 0, 0.05)';

        window.addEventListener('load', function() {
            const canvas = document.getElementById('matrixCanvas');
            if (canvas) {
                const ctx = canvas.getContext('2d');

                function resizeCanvas() {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                }

                window.addEventListener('resize', resizeCanvas);
                resizeCanvas();

                const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
                const fontSize = 10;
                const columns = canvas.width / fontSize;

                const drops = [];
                for (let i = 0; i < columns; i++) {
                    drops[i] = 1;
                }

                function draw() {
                    ctx.fillStyle = matrixBg;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);

                    ctx.fillStyle = matrixColor;
                    ctx.font = fontSize + 'px monospace';

                    for (let i = 0; i < drops.length; i++) {
                        const text = chars.charAt(Math.floor(Math.random() * chars.length));
                        ctx.fillText(text, i * fontSize, drops[i] * fontSize);

                        if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                            drops[i] = 0;
                        }
                        drops[i]++;
                    }
                }

                setInterval(draw, 33);
            } else {
                console.error('Canvas element not found');
            }
        });
    </script>
</body>
</html>
