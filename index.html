<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>It's Always DNS - Advanced Absurd Troubleshooting Simulator</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #000000;
            color: #00ff00;
            overflow: hidden;
        }
        .container {
            text-align: center;
            padding: 40px;
            background-color: rgba(10, 10, 10, 0.8);
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(0,255,0,0.3);
            max-width: 80%;
            position: relative;
            z-index: 1;
        }
        h1 {
            margin-bottom: 20px;
            font-size: 2.8em;
            text-shadow: 0 0 10px #00ff00;
        }
        #problemDisplay {
            font-size: 1.8em;
            margin-bottom: 30px;
            min-height: 2.5em;
            text-shadow: 0 0 5px #00ff00;
        }
        button {
            font-size: 1.3em;
            padding: 15px 30px;
            cursor: pointer;
            background-color: #003300;
            color: #00ff00;
            border: 2px solid #00ff00;
            border-radius: 8px;
            font-weight: bold;
            transition: all 0.3s ease;
            text-shadow: 0 0 5px #00ff00;
            box-shadow: 0 0 10px #00ff00;
            margin: 10px;
        }
        button:hover {
            background-color: #00ff00;
            color: #000000;
            box-shadow: 0 0 20px #00ff00;
        }
        #terminal {
            background-color: #001100;
            border: 1px solid #00ff00;
            padding: 10px;
            margin-top: 20px;
            text-align: left;
            height: 200px;
            overflow-y: auto;
            font-size: 0.9em;
        }
        #statsDisplay {
            font-size: 1.2em;
            margin-top: 20px;
        }
        #actionButtons {
            display: none;
        }
        #levelDisplay {
            font-size: 1.5em;
            margin-top: 20px;
            font-weight: bold;
        }
        #progressBar {
            width: 0;
            height: 5px;
            background-color: #00ff00;
            position: absolute;
            bottom: 0;
            left: 0;
            transition: width 0.5s ease;
        }
        .matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.1;
        }
        #modeContent {
            display: none;
            margin-top: 20px;
        }
        #diagnosisTools, #fixTools, #escalationOptions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        .tool-button {
            font-size: 1em;
            padding: 10px;
        }
        #backButton {
            position: absolute;
            top: 10px;
            left: 10px;
        }
    </style>
</head>
<body>
    <canvas class="matrix-bg" id="matrixCanvas"></canvas>
    <div class="container">
        <h1 id="mainTitle">It's Always DNS - Absurd Troubleshooting Simulator</h1>
        <div id="levelDisplay">Level 1: DNS Novice</div>
        <div id="problemDisplay">Ready to dive into DNS madness?</div>
        <button id="startButton" onclick="startSimulation()">Embrace the Chaos</button>
        <div id="actionButtons">
            <button onclick="enterMode('diagnose')">Diagnose (Guess Wildly)</button>
            <button onclick="enterMode('fix')">Fix (Break Something Else)</button>
            <button onclick="enterMode('escalate')">Escalate (Pass the Buck)</button>
        </div>
        <div id="modeContent">
            <button id="backButton" onclick="exitMode()">Back to Sanity</button>
            <div id="diagnosisTools"></div>
            <div id="fixTools"></div>
            <div id="escalationOptions"></div>
        </div>
        <div id="terminal"></div>
        <div id="statsDisplay">Problems "Solved": 0 | Despair Points: 0</div>
        <div id="progressBar"></div>
    </div>

    <script>
        const problems = [
            { name: "DNS server decided to take a vacation to the Bahamas", difficulty: 1 },
            { name: "NXDOMAIN errors because domains are practicing social distancing", difficulty: 2 },
            { name: "Slow DNS resolution due to packets stuck in rush hour traffic", difficulty: 2 },
            { name: "DNS cache poisoned by mischievous internet gremlins", difficulty: 4 },
            { name: "Reverse DNS lookup keeps returning 'Ask again later'", difficulty: 3 },
            { name: "DNS amplification attack or just really enthusiastic users?", difficulty: 5 },
            { name: "Split-horizon DNS confused about which reality to live in", difficulty: 4 },
            { name: "DNSSEC validation errors because keys forgot their password", difficulty: 4 },
            { name: "DNS queries being intercepted by tinfoil hat wearing routers", difficulty: 3 },
            { name: "Zone transfer issues: primary DNS server ghosted the secondary", difficulty: 3 }
        ];

        const levels = [
            "DNS Novice",
            "Packet Peon",
            "Query Quester",
            "Resolution Rogue",
            "Nameserver Ninja",
            "Legendary DNS Whisperer (Still Clueless)"
        ];

        const diagnoseActions = [
            "Perform a rain dance around the server rack",
            "Consult the ancient DNS prophecies",
            "Ask the office plant for its opinion",
            "Blame it on solar flares and cosmic rays",
            "Check if Mercury is in retrograde",
            "Analyze server logs using interpretive dance",
            "Conduct a sÃ©ance to contact the spirit of Jon Postel",
            "Use a Ouija board to debug the DNS configuration"
        ];

        const fixActions = [
            "Try turning it off and on again (classic!)",
            "Sacrifice a rubber chicken to the DNS gods",
            "Apply percussive maintenance to the DNS server",
            "Reroute DNS queries through a potato",
            "Implement RFC 3514 (Evil Bit) filtering",
            "Migrate DNS services to a fleet of carrier pigeons",
            "Replace all DNS records with 'localhost'",
            "Implement DNS over Morse code"
        ];

        const escalateActions = [
            "Fake your own disappearance and change careers",
            "Promote the problem to management material",
            "Declare DNS bankruptcy and start over",
            "Escalate to the UN Security Council",
            "Call an old priest and a young priest",
            "Initiate Order 66 on all DNS servers",
            "Email complaint to root@localhost",
            "Retreat to a cave and become a DNS hermit"
        ];

        let currentProblem = null;
        let problemsSolved = 0;
        let xp = 0;
        let currentLevel = 0;
        let currentMode = null;

        function startSimulation() {
            document.getElementById('startButton').style.display = 'none';
            document.getElementById('actionButtons').style.display = 'block';
            newProblem();
            logToTerminal("Welcome to DNS hell. Abandon all hope, ye who enter here.");
        }

        function newProblem() {
            currentProblem = getRandomElement(problems);
            document.getElementById('problemDisplay').textContent = `Current Crisis: ${currentProblem.name}`;
            logToTerminal("New DNS catastrophe detected: " + currentProblem.name);
        }

        function enterMode(mode) {
            currentMode = mode;
            document.getElementById('actionButtons').style.display = 'none';
            document.getElementById('modeContent').style.display = 'block';
            document.getElementById('diagnosisTools').style.display = 'none';
            document.getElementById('fixTools').style.display = 'none';
            document.getElementById('escalationOptions').style.display = 'none';
            
            let actions;
            switch(mode) {
                case 'diagnose':
                    actions = diagnoseActions;
                    document.getElementById('diagnosisTools').style.display = 'grid';
                    break;
                case 'fix':
                    actions = fixActions;
                    document.getElementById('fixTools').style.display = 'grid';
                    break;
                case 'escalate':
                    actions = escalateActions;
                    document.getElementById('escalationOptions').style.display = 'grid';
                    break;
            }
            
            const container = document.getElementById(`${mode}Tools`) || document.getElementById('escalationOptions');
            container.innerHTML = '';
            actions.forEach(action => {
                const button = document.createElement('button');
                button.textContent = action;
                button.classList.add('tool-button');
                button.onclick = () => performAction(mode, action);
                container.appendChild(button);
            });
        }

        function exitMode() {
            currentMode = null;
            document.getElementById('modeContent').style.display = 'none';
            document.getElementById('actionButtons').style.display = 'block';
        }

        function performAction(mode, action) {
            let success, xpGain, message;
            const difficulty = currentProblem.difficulty;
            
            switch(mode) {
                case 'diagnose':
                    success = Math.random() < (0.8 - difficulty * 0.1);
                    xpGain = success ? 5 + difficulty : 2;
                    message = success ? `Diagnosis successful: ${getRandomDiagnosisResult()}` : "Diagnosis inconclusive. Have you tried asking it nicely?";
                    break;
                case 'fix':
                    success = Math.random() < (0.7 - difficulty * 0.1);
                    xpGain = success ? 10 + difficulty * 2 : 3;
                    if (success) {
                        problemsSolved++;
                        message = `Fix successful! ${currentProblem.name} resolved. But at what cost?`;
                        setTimeout(newProblem, 2000);
                    } else {
                        message = "Fix attempt failed spectacularly. Have you considered a career in interpretive dance?";
                    }
                    break;
                case 'escalate':
                    success = Math.random() < 0.9;
                    xpGain = success ? 7 + difficulty : 4;
                    message = success ? `Escalation successful: ${getRandomEscalationResult()}` : "Escalation pending. Upper management is currently hiding under their desks.";
                    break;
            }
            
            logToTerminal(`${mode} action attempted: ${action}`);
            logToTerminal(message);
            xp += xpGain;
            updateStats();
        }

        function getRandomDiagnosisResult() {
            const results = [
                "It's DNS. It's always DNS.",
                "The packets are shy and need encouragement",
                "Your DNS server is having an existential crisis",
                "Quantum fluctuations in the DNS space-time continuum",
                "Gremlins have infested the network stack",
                "Your DNS cache is full of cobwebs and bad decisions",
                "The DNS elders are displeased with your offerings",
                "Your IP addresses are not properly social distancing"
            ];
            return getRandomElement(results);
        }

        function getRandomEscalationResult() {
            const results = [
                "Senior team now hiding in the server room",
                "Vendor support suggested turning it off and on again",
                "Emergency protocol initiated: panic in 3... 2... 1...",
                "Task force assembled to assign blame creatively",
                "Cybersecurity team convinced it's an alien invasion",
                "Network architects drafting strongly worded letter to DNS",
                "DNS working group convened for a group cry",
                "Escalated to Tier 3 support, they're laughing hysterically"
            ];
            return getRandomElement(results);
        }

        function updateStats() {
            document.getElementById('statsDisplay').textContent = `Problems "Solved": ${problemsSolved} | Despair Points: ${xp}`;
            const newLevel = Math.min(Math.floor(xp / 50), levels.length - 1);
            if (newLevel > currentLevel) {
                currentLevel = newLevel;
                document.getElementById('levelDisplay').textContent = `Level ${currentLevel + 1}: ${levels[currentLevel]}`;
                logToTerminal(`Congratulations! You've been promoted to ${levels[currentLevel]}! It's not a compliment.`);
            }
            document.getElementById('progressBar').style.width = `${(xp % 50) * 2}%`;
        }

        function logToTerminal(message) {
            const terminal = document.getElementById('terminal');
            terminal.innerHTML += `> ${message}<br>`;
            terminal.scrollTop = terminal.scrollHeight;
        }

        function getRandomElement(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        // Matrix rain effect
        const canvas = document.getElementById('matrixCanvas');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
        const fontSize = 10;
        const columns = canvas.width / fontSize;

        const drops = [];
        for (let i = 0; i < columns; i++) {
            drops[i] = 1;
        }

        function draw() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#00ff00';
            ctx.font = fontSize + 'px monospace';

            for (let i = 0; i < drops.length; i++) {
                const text = chars.charAt(Math.floor(Math.random() * chars.length));
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);

                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }

        setInterval(draw, 33);
    </script>
</body>
