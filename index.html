<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>It's Always DNS - Advanced Troubleshooting Simulator</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #000000;
            color: #00ff00;
            overflow: hidden;
        }
        .container {
            text-align: center;
            padding: 40px;
            background-color: rgba(10, 10, 10, 0.8);
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(0,255,0,0.3);
            max-width: 80%;
            position: relative;
            z-index: 1;
        }
        h1 {
            margin-bottom: 20px;
            font-size: 2.8em;
            text-shadow: 0 0 10px #00ff00;
        }
        #problemDisplay {
            font-size: 1.8em;
            margin-bottom: 30px;
            min-height: 2.5em;
            text-shadow: 0 0 5px #00ff00;
        }
        button {
            font-size: 1.3em;
            padding: 15px 30px;
            cursor: pointer;
            background-color: #003300;
            color: #00ff00;
            border: 2px solid #00ff00;
            border-radius: 8px;
            font-weight: bold;
            transition: all 0.3s ease;
            text-shadow: 0 0 5px #00ff00;
            box-shadow: 0 0 10px #00ff00;
            margin: 10px;
        }
        button:hover {
            background-color: #00ff00;
            color: #000000;
            box-shadow: 0 0 20px #00ff00;
        }
        #terminal {
            background-color: #001100;
            border: 1px solid #00ff00;
            padding: 10px;
            margin-top: 20px;
            text-align: left;
            height: 200px;
            overflow-y: auto;
            font-size: 0.9em;
        }
        #statsDisplay {
            font-size: 1.2em;
            margin-top: 20px;
        }
        #actionButtons {
            display: none;
        }
        #levelDisplay {
            font-size: 1.5em;
            margin-top: 20px;
            font-weight: bold;
        }
        #progressBar {
            width: 0;
            height: 5px;
            background-color: #00ff00;
            position: absolute;
            bottom: 0;
            left: 0;
            transition: width 0.5s ease;
        }
        .matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.1;
        }
        #modeContent {
            display: none;
            margin-top: 20px;
        }
        #diagnosisTools, #fixTools, #escalationOptions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        .tool-button {
            font-size: 1em;
            padding: 10px;
        }
        #backButton {
            position: absolute;
            top: 10px;
            left: 10px;
        }
    </style>
</head>
<body>
    <canvas class="matrix-bg" id="matrixCanvas"></canvas>
    <div class="container">
        <h1 id="mainTitle">DNS Troubleshooting Simulator</h1>
        <div id="levelDisplay">Level 1: DNS Novice</div>
        <div id="problemDisplay">Ready to tackle some DNS issues?</div>
        <button id="startButton" onclick="startSimulation()">Start Simulation</button>
        <div id="actionButtons">
            <button onclick="enterMode('diagnose')">Diagnose</button>
            <button onclick="enterMode('fix')">Attempt Fix</button>
            <button onclick="enterMode('escalate')">Escalate</button>
        </div>
        <div id="modeContent">
            <button id="backButton" onclick="exitMode()">Back</button>
            <div id="diagnosisTools"></div>
            <div id="fixTools"></div>
            <div id="escalationOptions"></div>
        </div>
        <div id="terminal"></div>
        <div id="statsDisplay">Problems Solved: 0 | XP: 0</div>
        <div id="progressBar"></div>
    </div>

    <script>
        const problems = [
            { name: "DNS server not responding", difficulty: 1 },
            { name: "NXDOMAIN errors for valid domains", difficulty: 2 },
            { name: "Slow DNS resolution", difficulty: 2 },
            { name: "Intermittent DNS failures", difficulty: 3 },
            { name: "DNS cache poisoning detected", difficulty: 4 },
            { name: "Reverse DNS lookup failing", difficulty: 3 },
            { name: "DNS zone transfer issues", difficulty: 3 },
            { name: "DNSSEC validation errors", difficulty: 4 },
            { name: "DNS amplification attack in progress", difficulty: 5 },
            { name: "Split-horizon DNS misconfiguration", difficulty: 4 }
        ];

        const levels = [
            "DNS Novice",
            "DNS Apprentice",
            "DNS Journeyman",
            "DNS Expert",
            "DNS Master",
            "Legendary DNS Whisperer"
        ];

        const diagnoseActions = [
            "Check DNS server logs",
            "Perform nslookup and dig queries",
            "Analyze BIND configuration",
            "Inspect DNS cache",
            "Verify DNS propagation",
            "Run Wireshark capture on DNS traffic",
            "Check firewall rules for DNS ports",
            "Investigate potential DNS hijacking",
            "Analyze DNS query patterns",
            "Verify DNS record consistency across servers"
        ];

        const fixActions = [
            "Restart DNS server",
            "Flush DNS cache",
            "Update DNS records",
            "Configure DNS forwarders",
            "Implement DNSSEC",
            "Optimize DNS query handling",
            "Set up DNS load balancing",
            "Configure split-horizon DNS",
            "Implement DNS security extensions",
            "Update DNS software to latest version"
        ];

        const escalateActions = [
            "Contact senior DNS administrator",
            "Open ticket with DNS provider",
            "Escalate to network operations center",
            "Consult DNS working group",
            "Initiate emergency response protocol",
            "Engage vendor support for DNS software",
            "Assemble cross-functional DNS task force",
            "Escalate to cybersecurity team",
            "Initiate DNS infrastructure review",
            "Call emergency meeting with network architects"
        ];

        let currentProblem = null;
        let problemsSolved = 0;
        let xp = 0;
        let currentLevel = 0;
        let currentMode = null;

        function startSimulation() {
            document.getElementById('startButton').style.display = 'none';
            document.getElementById('actionButtons').style.display = 'block';
            newProblem();
        }

        function newProblem() {
            currentProblem = getRandomElement(problems);
            document.getElementById('problemDisplay').textContent = `Current Issue: ${currentProblem.name}`;
            logToTerminal("New problem detected: " + currentProblem.name);
        }

        function enterMode(mode) {
            currentMode = mode;
            document.getElementById('actionButtons').style.display = 'none';
            document.getElementById('modeContent').style.display = 'block';
            document.getElementById('diagnosisTools').style.display = 'none';
            document.getElementById('fixTools').style.display = 'none';
            document.getElementById('escalationOptions').style.display = 'none';
            
            let actions;
            switch(mode) {
                case 'diagnose':
                    actions = diagnoseActions;
                    document.getElementById('diagnosisTools').style.display = 'grid';
                    break;
                case 'fix':
                    actions = fixActions;
                    document.getElementById('fixTools').style.display = 'grid';
                    break;
                case 'escalate':
                    actions = escalateActions;
                    document.getElementById('escalationOptions').style.display = 'grid';
                    break;
            }
            
            const container = document.getElementById(`${mode}Tools`) || document.getElementById('escalationOptions');
            container.innerHTML = '';
            actions.forEach(action => {
                const button = document.createElement('button');
                button.textContent = action;
                button.classList.add('tool-button');
                button.onclick = () => performAction(mode, action);
                container.appendChild(button);
            });
        }

        function exitMode() {
            currentMode = null;
            document.getElementById('modeContent').style.display = 'none';
            document.getElementById('actionButtons').style.display = 'block';
        }

        function performAction(mode, action) {
            let success, xpGain, message;
            const difficulty = currentProblem.difficulty;
            
            switch(mode) {
                case 'diagnose':
                    success = Math.random() < (0.8 - difficulty * 0.1);
                    xpGain = success ? 5 + difficulty : 2;
                    message = success ? `Diagnosis successful: ${getRandomDiagnosisResult()}` : "Diagnosis inconclusive. Further investigation required.";
                    break;
                case 'fix':
                    success = Math.random() < (0.7 - difficulty * 0.1);
                    xpGain = success ? 10 + difficulty * 2 : 3;
                    if (success) {
                        problemsSolved++;
                        message = `Fix successful! ${currentProblem.name} resolved.`;
                        setTimeout(newProblem, 2000);
                    } else {
                        message = "Fix attempt failed. Consider trying a different approach or escalating.";
                    }
                    break;
                case 'escalate':
                    success = Math.random() < 0.9;
                    xpGain = success ? 7 + difficulty : 4;
                    message = success ? `Escalation successful: ${getRandomEscalationResult()}` : "Escalation pending. Await further instructions from upper management.";
                    break;
            }
            
            logToTerminal(`${mode} action: ${action}`);
            logToTerminal(message);
            xp += xpGain;
            updateStats();
        }

        function getRandomDiagnosisResult() {
            const results = [
                "Issue isolated to primary DNS server",
                "Detected misconfiguration in zone file",
                "Identified network connectivity problem",
                "Found outdated DNS records",
                "Discovered unauthorized DNS changes",
                "Detected abnormal query patterns",
                "Identified DNSSEC validation failure",
                "Found inconsistent DNS caching behavior"
            ];
            return getRandomElement(results);
        }

        function getRandomEscalationResult() {
            const results = [
                "Senior team now investigating the issue",
                "Vendor support engaged for advanced troubleshooting",
                "Emergency protocol initiated for critical DNS resolution",
                "Task force assembled to address the problem",
                "Cybersecurity team analyzing potential DNS-based attack",
                "Network architects reviewing DNS infrastructure",
                "DNS working group convened for collaborative problem-solving",
                "Escalated to Tier 3 support for specialized assistance"
            ];
            return getRandomElement(results);
        }

        function updateStats() {
            document.getElementById('statsDisplay').textContent = `Problems Solved: ${problemsSolved} | XP: ${xp}`;
            const newLevel = Math.min(Math.floor(xp / 50), levels.length - 1);
            if (newLevel > currentLevel) {
                currentLevel = newLevel;
                document.getElementById('levelDisplay').textContent = `Level ${currentLevel + 1}: ${levels[currentLevel]}`;
                logToTerminal(`Congratulations! You've been promoted to ${levels[currentLevel]}!`);
            }
            document.getElementById('progressBar').style.width = `${(xp % 50) * 2}%`;
        }

        function logToTerminal(message) {
            const terminal = document.getElementById('terminal');
            terminal.innerHTML += `> ${message}<br>`;
            terminal.scrollTop = terminal.scrollHeight;
        }

        function getRandomElement(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        // Matrix rain effect
        const canvas = document.getElementById('matrixCanvas');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
        const fontSize = 10;
        const columns = canvas.width / fontSize;

        const drops = [];
        for (let i = 0; i < columns; i++) {
            drops[i] = 1;
        }

        function draw() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#00ff00';
            ctx.font = fontSize + 'px monospace';

            for (let i = 0; i < drops.length; i++) {
                const text = chars.charAt(Math.floor(Math.random() * chars.length));
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);

                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }

        setInterval(draw, 33);
    </script>
</body>
</html>
